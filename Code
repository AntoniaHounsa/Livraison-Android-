
<nav aria-label="Fil d’Ariane" class="breadcrumb-container">
  @for (node of trail; track node.id; let last = $last) {

    <mat-form-field appearance="fill" [floatLabel]="'never'" class="crumb-field">
      <mat-select
        [value]="node.id"
        (selectionChange)="onSelect($event.value)"
        [panelClass]="'crumb-panel'">

        <mat-select-trigger>
          <span class="crumb-value">{{ node.title }}</span>
        </mat-select-trigger>

        @for (sib of (siblingsMap.get(node.id) ?? []); track sib.id) {
          <mat-option [value]="sib.id">{{ sib.title }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    @if (!last) { <span class="sep">›</span> }
  }
</nav>

